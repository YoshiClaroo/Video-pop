<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°Video exclusivo! - Videyy</title>
    <style>
        .adsterra-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            width: 100%;
            flex-direction: column;
        }
        body {
            margin: 0;
            padding: 0;
            background: #000;
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .player-container {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
            box-sizing: border-box;
        }
        .video-wrapper {
            width: 100%;
            aspect-ratio: 16/9; /* Fuerza relaci√≥n horizontal */
            background: #000;
            position: relative;
            overflow: hidden;
        }
        #video-player {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Cambiado a 'contain' para mostrar todo el video */
        }
        .video-title {
            color: #FF5722;
            text-align: center;
            font-size: 24px;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        @media (max-width: 600px) {
            .video-title { font-size: 20px; }
        }
        
        /* Nuevos estilos para pantalla completa */
        .video-wrapper:-webkit-full-screen {
            width: 100%;
            height: 100%;
            max-width: none;
        }
        .video-wrapper:-moz-full-screen {
            width: 100%;
            height: 100%;
            max-width: none;
        }
        .video-wrapper:-ms-fullscreen {
            width: 100%;
            height: 100%;
            max-width: none;
        }
        .video-wrapper:fullscreen {
            width: 100%;
            height: 100%;
            max-width: none;
        }
    </style>
    <!-- HillTopAds Push Notification -->
    <script>
    (function(rjayf){
        var d = document,
            s = d.createElement('script'),
            l = d.scripts[d.scripts.length - 1];
        s.settings = rjayf || {};
        s.src = "//distortedwin.com/b/XSVNs.dyGXl/0bYnWtcy/eeym/9XuLZIUNlbkrPtT/YB1MNMj/cyxFMBDeYjt/NZjWU-2TN/zEECwoNSw_";
        s.async = true;
        s.referrerPolicy = 'no-referrer-when-downgrade';
        l.parentNode.insertBefore(s, l);
    })({})
    </script>
    <script src="https://cdn.fluidplayer.com/v3/current/fluidplayer.min.js"></script>
</head>
<body>
    <!-- Banner Superior √önico - HillTopAds 300x250 -->
    <div class="adsterra-container">
        <div style="font-size: 16px; font-weight: bold; color: #ff4444; margin-bottom: 8px;">
            üîû ¬øQuer√©s m√°s contenido como este? Mir√° lo que ofrecen estos anuncios üëá
        </div>
        <script>
        (function(ryib){
            var d = document,
                s = d.createElement('script'),
                l = d.scripts[d.scripts.length - 1];
            s.settings = ryib || {};
            s.src = "//distortedwin.com/bkX/VEs.dwGhlZ0cYxWTcH/seDmj9buXZrUPl-kdPUTrYW1/NujEcdwNOTTLYitDNCjPUe2qN/zbA/5CN_wF";
            s.async = true;
            s.referrerPolicy = 'no-referrer-when-downgrade';
            l.parentNode.insertBefore(s, l);
        })({})
        </script>
        <div style="font-size: 12px; color: #aaa; margin-top: 6px;">
            Publicidad adaptada a tus intereses.
        </div>
    </div>

    <!-- Reproductor con wrapper forzado a horizontal -->
    <div class="player-container">
        <div class="video-wrapper" id="video-wrapper">
            <video id="video-player">
                <source src="" type="video/mp4">
            </video>
        </div>
    </div>

    <!-- Script _waual5 (integrado) -->
    <script id="_waual5">
        var _wau = _wau || []; _wau.push(["dynamic", "023t6bcu3h", "al5", "c4302bffffff", "small"]);
    </script>
    <script async src="//waust.at/d.js"></script>

    <script>
        // Configuraci√≥n del SmartLink (HillTopAds)
        const SMARTLINK_URL = "https://graceful-normal.com/Fzk5GN";
        let smartlinkOpened = false;

        // Carga el video
        const urlParams = new URLSearchParams(window.location.search);
        const videoUrl = decodeURIComponent(urlParams.get('src'));
        const videoPlayer = document.getElementById('video-player');
        const videoWrapper = document.getElementById('video-wrapper');

        if (videoUrl) {
            videoPlayer.src = videoUrl;
            
            const player = fluidPlayer('video-player', {
                layoutControls: {
                    fillToContainer: false, // Cambiado a false para mejor control
                    autoPlay: false,
                    mute: false,
                    controlBar: {
                        autoHide: true
                    },
                    allowTheatre: true,
                    allowFullscreen: true,
                    primaryColor: "#FF5722"
                }
            });

            // Funci√≥n para manejar pantalla completa
            function toggleFullScreen() {
                if (!document.fullscreenElement) {
                    if (videoWrapper.requestFullscreen) {
                        videoWrapper.requestFullscreen();
                    } else if (videoWrapper.webkitRequestFullscreen) {
                        videoWrapper.webkitRequestFullscreen();
                    } else if (videoWrapper.msRequestFullscreen) {
                        videoWrapper.msRequestFullscreen();
                    }
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    }
                }
            }

            // A√±adir bot√≥n de pantalla completa personalizado si es necesario
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(function() {
                    const fullscreenBtn = document.querySelector('.fp-fullscreen');
                    if (fullscreenBtn) {
                        fullscreenBtn.addEventListener('click', function(e) {
                            e.preventDefault();
                            toggleFullScreen();
                        });
                    }
                }, 1000);
            });

            videoPlayer.addEventListener('loadedmetadata', function() {
                const videoDuration = videoPlayer.duration;
                const isLongVideo = videoDuration > 90;
                
                // Ajustar el video para mantener relaci√≥n de aspecto
                const videoRatio = videoPlayer.videoWidth / videoPlayer.videoHeight;
                const containerRatio = 16/9;
                
                if (videoRatio < containerRatio) {
                    // Video es m√°s vertical que el contenedor
                    videoPlayer.style.objectFit = 'contain';
                    videoPlayer.style.width = 'auto';
                    videoPlayer.style.height = '100%';
                    videoPlayer.style.margin = '0 auto';
                } else {
                    // Video es m√°s horizontal que el contenedor
                    videoPlayer.style.objectFit = 'cover';
                    videoPlayer.style.width = '100%';
                    videoPlayer.style.height = '100%';
                }

                videoPlayer.addEventListener('timeupdate', function() {
                    const currentTime = videoPlayer.currentTime;
                    const seventyPercent = videoDuration * 0.7;

                    if (isLongVideo && currentTime >= seventyPercent && !smartlinkOpened) {
                        window.open(SMARTLINK_URL, '_blank');
                        smartlinkOpened = true;
                    }
                });

                videoPlayer.addEventListener('ended', function() {
                    if (!smartlinkOpened) {
                        window.open(SMARTLINK_URL, '_blank');
                    }
                });
            });

        } else {
            document.body.innerHTML = `
                <div style="color:white; text-align:center; padding:50px;">
                    <h2>‚ùå Error: Video no encontrado</h2>
                </div>
            `;
        }
    </script>

    <!-- HillTopAds Popunder (al final del body) -->
    <script>
    (function(amd){
        var d = document,
            s = d.createElement('script'),
            l = d.scripts[d.scripts.length - 1];
        s.settings = amd || {};
        s.src = "//graceful-normal.com/cxDT9/6.bm2P5OlVSBW_Qa9SNLjhU/2/NGz/E/x/N_i/0K2/NpTZYy3/MoTmEI3c";
        s.async = true;
        s.referrerPolicy = 'no-referrer-when-downgrade';
        l.parentNode.insertBefore(s, l);
    })({})
    </script>

    <!-- Adsterra Interstitial (opcional para EE.UU./Europa) -->
    <script>
        // Detecta pa√≠s (ejemplo: puedes usar una API real como ipinfo.io)
        const userCountry = "AR"; // Cambia seg√∫n geolocalizaci√≥n
        if (["US", "CA", "DE", "FR", "UK"].includes(userCountry)) {
            const interstitialScript = document.createElement('script');
            interstitialScript.src = "https://cdn.diclotrans.com/sdk/v1/51227/fda436afa9f6df194de506b9beaba219677150a9/lib.js";
            document.body.appendChild(interstitialScript);
        }
    </script>
</body>
</html>
